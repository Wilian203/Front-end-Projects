document.addEventListener("DOMContentLoaded",()=>{mostrarPeliculas(peliculas),mostraryearSelec(),mostrarSelectPeliculas()});const peliculasContenedor=document.querySelector("#peliculas"),titulo=document.querySelector("#titulo"),categoria=document.querySelector("#categoria"),year=document.querySelector("#year"),yearMax=2021,yearMin=yearMax-20,mensaje=document.querySelector("#mensaje"),busqueda={titulo:"",categoria:"",year:""};function mostrarPeliculas(e){limpiarHTML(),e.forEach(e=>{const{imagen:t,nombre:a,categoria:n,year:r}=e,o=document.createElement("div");o.classList.add("contenido__pelicula"),o.innerHTML=`\n          <div class="contenido__imagen">\n             <img src="${t}" alt="avenger">\n          </div>\n          <div class="contenido__info">\n                <h3 class="contenido__info-titulo">${a}</h3>\n                <p class="contenido__info-categoria">${n}</p>\n                <p class="contenido__info-year">${r}</p>\n            </div>\n\n        `,peliculasContenedor.appendChild(o)})}function limpiarHTML(){for(;peliculasContenedor.firstChild;)peliculasContenedor.removeChild(peliculasContenedor.firstChild);for(;mensaje.firstChild;)mensaje.removeChild(mensaje.firstChild)}function mostraryearSelec(){for(let e=yearMax;e>=yearMin;e--){const t=document.createElement("option");t.value=e,t.textContent=e,year.appendChild(t)}}function mostrarSelectPeliculas(){peliculas.forEach(e=>{const{nombre:t}=e,a=document.createElement("option");a.value=t,a.textContent=t,titulo.appendChild(a)})}function filtrarPeliculas(){const e=peliculas.filter(filtrarTitulo).filter(filtrarCategoria).filter(filtrarYear);e.length?mostrarPeliculas(e):PeliculaNoEncontrada()}function PeliculaNoEncontrada(){limpiarHTML();const e=document.createElement("p");e.classList.add("contenido__error"),e.textContent="No hubo ningun resultado. Intente con otros terminos de busqueda",mensaje.appendChild(e)}function filtrarTitulo(e){const{titulo:t}=busqueda;return t?e.nombre===t:e}function filtrarCategoria(e){const{categoria:t}=busqueda;return t?e.categoria===t:e}function filtrarYear(e){const{year:t}=busqueda;return t?e.year===t:e}titulo.addEventListener("change",e=>{busqueda.titulo=e.target.value,filtrarPeliculas()}),categoria.addEventListener("change",e=>{busqueda.categoria=e.target.value.toLowerCase(),filtrarPeliculas()}),year.addEventListener("change",e=>{busqueda.year=parseInt(e.target.value),filtrarPeliculas()});