document.addEventListener("DOMContentLoaded",()=>{eventos(),mostrarArticulos(productos),enlaceActivo(),carritoProductos=JSON.parse(localStorage.getItem("carrito"))||[],carritoHTML()});const listaProductos=document.querySelector("#lista-productos"),listaCarrito=document.querySelector("#lista-carrito"),vaciarCarritoBtn=document.querySelector("#vaciar-carrito"),carrito=document.querySelector("#carrito");let carritoProductos=[];function eventos(){listaProductos.addEventListener("click",agregarCarrito),carrito.addEventListener("click",eliminarProducto),vaciarCarritoBtn.addEventListener("click",()=>{carritoProductos=[],carritoHTML()})}function agregarCarrito(t){t.preventDefault(),t.target.classList.contains("agregar-carrito")&&leerDatosDelProducto(t.target.parentElement.parentElement)}function eliminarProducto(t){if(t.target.classList.contains("delete-btn")){const r=t.target.getAttribute("data-id");carritoProductos=carritoProductos.filter(t=>t.id!==r)}carritoHTML()}function leerDatosDelProducto(t){const r={imagen:t.querySelector("img").src,titulo:t.querySelector("h3").textContent,precio:t.querySelector(".producto__precio").textContent,cantidad:1,id:t.querySelector("a").getAttribute("data-id")},o=carritoProductos.find(t=>t.id===r.id);o?o.cantidad+=1:carritoProductos=[...carritoProductos,r],carritoHTML()}function carritoHTML(){limpiarHTML(),carritoProductos.forEach(t=>{const{imagen:r,titulo:o,precio:e,cantidad:a,id:c}=t,i=document.createElement("tr");i.innerHTML=`\n        <td>\n            <img src="${r}"/>\n        </td>\n        <td>${o}</td>\n        <td>${e}</td>\n        <td>${a}</td>\n        <td><button class="delete-btn" data-id="${c}">Eliminar</button></td>\n        \n        `,listaCarrito.appendChild(i)}),sincronizarStorage()}function sincronizarStorage(){localStorage.setItem("carrito",JSON.stringify(carritoProductos))}function limpiarHTML(){for(;listaCarrito.firstChild;)listaCarrito.removeChild(listaCarrito.firstChild)}const enlacesFiltro=document.querySelectorAll(".navegacion__enlace"),entrada=document.querySelector("#entrada"),busqueda={marca:"",categoria:""};function mostrarArticulos(t){limpiarProductos(),t.forEach(t=>{const{imagen:r,titulo:o,stock:e,precio:a,id:c}=t,i=document.createElement("div");i.classList.add("producto"),i.innerHTML=`\n        \n           <div class="producto__imagen">\n                <img src="${r}" alt="producto">\n            </div>\n            <div class="producto__contenido">\n                <h3 class="producto__titulo">${o}</h3>\n                <p class="producto__precio">USD$  ${a}</p>\n                <p class="producto__stock">Stock: <span>${e}</span></p>\n                <a href="#" class="producto__btn agregar-carrito" data-id="${c}">Agregar al carrito</a>\n            </div>\n        `,listaProductos.appendChild(i)})}function limpiarProductos(){for(;listaProductos.firstChild;)listaProductos.removeChild(listaProductos.firstChild)}function filtrarProductos(){const t=productos.filter(filtrarCategoria).filter(filtrarMarca);limpiarError(),t.length?mostrarArticulos(t):mostrarMensaje()}function mostrarMensaje(t){limpiarProductos(),limpiarError();const r=document.createElement("p");r.textContent="Este producto no existe",r.classList.add("error"),mensaje.appendChild(r)}function limpiarError(){const t=document.querySelector("#mensaje").querySelector(".error");t&&t.remove()}function filtrarCategoria(t){const{categoria:r}=busqueda;return r?t.categoria.toLowerCase()===r.toLowerCase():t}function filtrarMarca(t){const{marca:r}=busqueda;return r?t.marca.toLowerCase()===r.toLowerCase():t}function enlaceActivo(){const t=document.querySelectorAll(".navegacion__enlace");t.forEach(r=>{r.addEventListener("click",o=>{o.preventDefault(),t.forEach(t=>t.classList.remove("navegacion__enlace--active")),r.classList.add("navegacion__enlace--active")})})}entrada.addEventListener("input",t=>{busqueda.marca=t.target.value,filtrarProductos()}),enlacesFiltro.forEach(t=>{t.addEventListener("click",t=>{const r=t.target.dataset.categoria;busqueda.categoria=r,filtrarProductos()})});